<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Print Layout Calculator — UI</title>
    <!-- Markup only. Visual styles live in style.css and behavior in app.js. -->
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body>
    <div class="wrap">
      <header class="app-header">
        <h1>Print Layout Calculator</h1>
        <p class="muted">Plan your sheet, finishing, and print-ready outputs from a single workspace.</p>
      </header>

      <section class="panel preview-panel">
        <div class="output-preview">
          <div class="toolbar preview-toolbar no-print">
            <label>
              <input class="layer-toggle" type="checkbox" data-layer="layout" checked />
              <span>Layout Area</span>
            </label>
            <label>
              <input class="layer-toggle" type="checkbox" data-layer="docs" checked />
              <span>Documents</span>
            </label>
            <label>
              <input class="layer-toggle" type="checkbox" data-layer="cuts" checked />
              <span>Cuts / Slits</span>
            </label>
            <label>
              <input class="layer-toggle" type="checkbox" data-layer="scores" checked />
              <span>Scores</span>
            </label>
          </div>
          <div class="preview"><svg id="svg" width="960" height="600" viewBox="0 0 960 600" aria-label="sheet preview"></svg></div>
          <div class="legend no-print">
            <span><i class="dot grid"></i>Layout Area</span>
            <span><i class="dot doc"></i>Documents</span>
            <span><i class="dot cut"></i>Cut/Slit Lines</span>
            <span><i class="dot score"></i>Scores</span>
          </div>
        </div>
      </section>

      <main class="panel tab-panel">
        <nav class="tabbar no-print output-tabs">
          <div class="tab active" data-tab="inputs">Inputs</div>
          <div class="tab" data-tab="summary">Summary</div>
          <div class="tab" data-tab="finishing">Cuts / Slits</div>
          <div class="tab" data-tab="scores">Scores</div>
          <div class="tab" data-tab="print">Print</div>
        </nav>

        <div class="tabpanes">
          <section id="tab-inputs" class="active">
            <div class="layout-pane">
              <div class="layout-header">
                <h2>Input Controls</h2>
                <p class="muted">Define the sheet, document, and safety settings to drive the preview.</p>
              </div>

              <div class="inputs-scroll">
                <div class="toolbar no-print inputs-toolbar">
                  <span>Units:</span>
                  <select id="units">
                    <option value="in">inches</option>
                    <option value="mm">millimeters</option>
                  </select>
                </div>

                <div class="layout-grid">
                  <div class="card">
                    <h2>Sheet</h2>
                    <div class="toolbar no-print">
                      <button class="btn" id="sheet-1218">12×18</button>
                      <button class="btn" id="sheet-1319">13×19</button>
                    </div>
                    <div class="row">
                      <label><span>Width</span><input id="sheetW" type="number" step="0.25" value="12"></label>
                      <label><span>Height</span><input id="sheetH" type="number" step="0.25" value="18"></label>
                    </div>
                  </div>

                  <div class="card">
                    <h2>Document</h2>
                    <div class="toolbar no-print">
                      <button class="btn" id="doc-35x2">3.5×2</button>
                      <button class="btn" id="doc-8511">8.5×11</button>
                      <button class="btn" id="doc-55x85">5.5×8.5</button>
                      <button class="btn" id="doc-35x4">3.5×4</button>
                    </div>
                    <div class="row">
                      <label><span>Width</span><input id="docW" type="number" step="0.125" value="3.5"></label>
                      <label><span>Height</span><input id="docH" type="number" step="0.125" value="2"></label>
                    </div>
                  </div>

                  <div class="card">
                    <h2>Gutter</h2>
                    <div class="toolbar no-print">
                      <button class="btn" id="gut-none">No gutters</button>
                      <button class="btn" id="gut-eighth">1/8″</button>
                      <button class="btn" id="gut-3125x67">0.3125×0.67</button>
                      <button class="btn" id="gut-1inch">1″</button>
                    </div>
                    <div class="row">
                      <label><span>Horizontal</span><input id="gutH" type="number" step="0.0625" value="0.125"></label>
                      <label><span>Vertical</span><input id="gutV" type="number" step="0.0625" value="0.125"></label>
                    </div>
                  </div>

                  <div class="card">
                    <h2>Docs (limit)</h2>
                    <div class="row">
                      <label title="Leave blank for auto max"><span>Across</span><input id="forceAcross" type="number" step="1" min="1" placeholder="auto"></label>
                      <label title="Leave blank for auto max"><span>Down</span><input id="forceDown" type="number" step="1" min="1" placeholder="auto"></label>
                    </div>
                  </div>

                  <div class="card">
                    <h2>Margins (inside printable)</h2>
                    <div class="row4">
                      <label><span>Top</span><input id="mTop" type="number" step="0.125" value="" placeholder="auto"></label>
                      <label><span>Right</span><input id="mRight" type="number" step="0.125" value="" placeholder="auto"></label>
                      <label><span>Bottom</span><input id="mBottom" type="number" step="0.125" value="" placeholder="auto"></label>
                      <label><span>Left</span><input id="mLeft" type="number" step="0.125" value="" placeholder="auto"></label>
                    </div>
                  </div>

                  <div class="card">
                    <h2>Non‑Printable Area</h2>
                    <div class="row4">
                      <label><span>Top</span><input id="npTop" type="number" step="0.625" value="0.0625"></label>
                      <label><span>Right</span><input id="npRight" type="number" step="0.625" value="0.0625"></label>
                      <label><span>Bottom</span><input id="npBottom" type="number" step="0.625" value="0.0625"></label>
                      <label><span>Left</span><input id="npLeft" type="number" step="0.625" value="0.0625"></label>
                    </div>
                  </div>
                </div>

                <div class="toolbar no-print inputs-actions">
                  <button class="btn primary" id="calcBtn">Update Preview</button>
                  <button class="btn" id="resetBtn">Reset</button>
                  <span class="k" id="status"></span>
                </div>
              </div>
            </div>
          </section>

          <section id="tab-summary">
            <div class="summary">
              <div class="card"><h3>Counts</h3>
                <div>Across: <span class="v" id="vAcross">—</span></div>
                <div>Down: <span class="v" id="vDown">—</span></div>
                <div>Total: <span class="v" id="vTotal">—</span></div>
              </div>
              <div class="card"><h3>Layout Area</h3>
                <div>W × H: <span class="v" id="vLayout">—</span></div>
                <div>Origin: <span class="v" id="vOrigin">—</span></div>
                <div>Realized Margins: <span class="v" id="vRealMargins">—</span></div>
              </div>
              <div class="card"><h3>Utilization</h3>
                <div>Used W/H: <span class="v" id="vUsed">—</span></div>
                <div>Trailing W/H: <span class="v" id="vTrail">—</span></div>
              </div>
            </div>
          </section>

          <section id="tab-finishing">
            <h3 style="margin-bottom:6px">Cut & Slit Systems</h3>
            <div class="grid" style="grid-template-columns:1fr 1fr">
              <div class="card"><h3>Cuts (Y edges)</h3>
                <table class="table" id="tblCuts"><thead><tr><th>Label</th><th>in</th><th>mm</th></tr></thead><tbody></tbody></table>
              </div>
              <div class="card"><h3>Slits (X edges)</h3>
                <table class="table" id="tblSlits"><thead><tr><th>Label</th><th>in</th><th>mm</th></tr></thead><tbody></tbody></table>
              </div>
            </div>
          </section>

          <section id="tab-scores">
            <div class="scores-pane">
              <div class="score-layout">
                <div class="score-column">
                  <div class="card stack score-card-intro">
                    <div class="score-card-title">
                      <h3>Score Planning</h3>
                      <p class="muted">Scores are normalized to each document. Use a preset for common folds or switch to custom entry to fine-tune the layout.</p>
                    </div>
                  </div>
                  <div class="card stack score-card score-card-vertical">
                    <div class="score-card-header">
                      <div class="score-card-title">
                        <h3>Vertical Scores</h3>
                        <p class="muted">Set positions for lines that run top-to-bottom across the sheet relative to the document width.</p>
                      </div>
                      <div class="score-presets no-print" role="group" aria-label="Vertical score presets">
                        <button class="btn" id="scorePresetBifold" type="button">Bifold</button>
                        <button class="btn" id="scorePresetTrifold" type="button">Trifold</button>
                        <button class="btn" id="scorePresetCustom" type="button">Custom</button>
                      </div>
                    </div>
                    <div class="score-field stack-sm">
                      <label class="score-label" for="scoresV" title="CSV, 0–1 (e.g., 0.5 or 0.33,0.66)">
                        <span>Vertical scores</span>
                        <input id="scoresV" type="text" value="" placeholder="e.g., 0.5" />
                      </label>
                      <p class="muted score-hint">Values are relative to the document width.</p>
                    </div>
                  </div>
                  <div class="card stack score-card score-card-horizontal">
                    <div class="score-card-header">
                      <div class="score-card-title">
                        <h3>Horizontal Scores</h3>
                        <p class="muted">Set positions for lines that run left-to-right across the sheet relative to the document height.</p>
                      </div>
                      <div class="score-presets no-print" role="group" aria-label="Horizontal score presets">
                        <button class="btn" id="scorePresetHBifold" type="button">Bifold</button>
                        <button class="btn" id="scorePresetHTrifold" type="button">Trifold</button>
                        <button class="btn" id="scorePresetHCustom" type="button">Custom</button>
                      </div>
                    </div>
                    <div class="score-field stack-sm">
                      <label class="score-label" for="scoresH" title="CSV, 0–1">
                        <span>Horizontal scores</span>
                        <input id="scoresH" type="text" value="" placeholder="e.g., 0.5" />
                      </label>
                      <p class="muted score-hint">Values are relative to the document height.</p>
                    </div>
                  </div>
                  <div class="card score-actions-card">
                    <div class="score-actions toolbar no-print">
                      <button class="btn" id="swapScoreOffsets" type="button">Swap vertical ↔ horizontal scores</button>
                      <button class="btn primary" id="applyScores" type="button">Apply Scores</button>
                      <span class="muted">Leave fields blank to omit scores.</span>
                    </div>
                  </div>
                </div>
                <div class="score-column score-results">
                  <div class="score-results-grid">
                    <div class="card stack score-table-card">
                      <div>
                        <h3>Scores (Y)</h3>
                        <p class="muted">Horizontal runs positioned along the sheet height.</p>
                      </div>
                      <table class="table" id="tblScoresH"><thead><tr><th>Label</th><th>in</th><th>mm</th><th>Display as perforation</th></tr></thead><tbody></tbody></table>
                    </div>
                    <div class="card stack score-table-card">
                      <div>
                        <h3>Scores (X)</h3>
                        <p class="muted">Vertical runs positioned along the sheet width.</p>
                      </div>
                      <table class="table" id="tblScoresV"><thead><tr><th>Label</th><th>in</th><th>mm</th><th>Display as perforation</th></tr></thead><tbody></tbody></table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section id="tab-print">
            <div class="row">
              <div class="card">
                <h3>Summary Snapshot</h3>
                <p class="muted">Review the calculated layout details without opening a print dialog.</p>
                <div class="summary">
                  <div>Sheet: <span class="v" id="pSheet">—</span></div>
                  <div>Doc: <span class="v" id="pDoc">—</span></div>
                  <div>Counts: <span class="v" id="pCounts">—</span></div>
                  <div>Gutter: <span class="v" id="pGutter">—</span></div>
                  <div>Margins: <span class="v" id="pMargins">—</span></div>
                </div>
              </div>
              <div class="card">
                <h3>What prints?</h3>
                <p class="muted">Summary cards and finishing tables remain available for browser printing.</p>
                <p class="muted">Use this tab as a quick reference for layout specs shared with production.</p>
              </div>
            </div>
            <div class="print-only" id="printTables"></div>
          </section>
        </div>
      </main>
    </div>

    <script src="./js/app.js"></script>
  </body>
</html>
