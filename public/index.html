<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Print Layout Calculator — UI</title>
    <!-- Markup only. Visual styles live in style.css and behavior in app.js. -->
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body>
    <div class="wrap">
      <header class="app-header">
        <h1>Print Layout Calculator</h1>
        <p class="muted">Plan your sheet, finishing, and print-ready outputs from a single workspace.</p>
      </header>

      <section class="panel preview-panel">
        <div class="output-preview">
          <div class="toolbar preview-toolbar no-print">
            <label>
              <input class="layer-toggle" type="checkbox" data-layer="layout" checked />
              <span>Layout Area</span>
            </label>
            <label>
              <input class="layer-toggle" type="checkbox" data-layer="docs" checked />
              <span>Documents</span>
            </label>
            <label>
              <input class="layer-toggle" type="checkbox" data-layer="cuts" checked />
              <span>Cuts / Slits</span>
            </label>
            <label>
              <input class="layer-toggle" type="checkbox" data-layer="scores" checked />
              <span>Scores</span>
            </label>
          </div>
          <div class="preview"><svg id="svg" width="960" height="600" viewBox="0 0 960 600" aria-label="sheet preview"></svg></div>
          <div class="legend no-print">
            <span><i class="dot grid"></i>Layout Area</span>
            <span><i class="dot doc"></i>Documents</span>
            <span><i class="dot cut"></i>Cut/Slit Lines</span>
            <span><i class="dot score"></i>Scores</span>
          </div>
        </div>
      </section>

      <main class="panel tab-panel">
        <nav class="tabbar no-print output-tabs">
          <div class="tab active" data-tab="inputs">Inputs</div>
          <div class="tab" data-tab="summary">Summary</div>
          <div class="tab" data-tab="finishing">Cuts / Slits</div>
          <div class="tab" data-tab="scores">Scores</div>
          <div class="tab" data-tab="perforations">Perforations</div>
          <div class="tab" data-tab="warnings">Warnings</div>
          <div class="tab" data-tab="print">Print</div>
          <div class="tab" data-tab="presets">Presets</div>
        </nav>

        <div class="tabpanes">
          <section id="tab-inputs" class="active">
            <div class="layout-pane">
              <div class="layout-header">
                <h2>Input Controls</h2>
                <p class="muted">Define the sheet, document, and safety settings to drive the preview.</p>
              </div>

              <div class="inputs-scroll">
                <div class="toolbar no-print inputs-toolbar">
                  <span>Units:</span>
                  <select id="units">
                    <option value="in">inches</option>
                    <option value="mm">millimeters</option>
                  </select>
                </div>

                <div class="layout-grid">
                  <div class="card">
                    <h2>Sheet</h2>
                    <div class="toolbar no-print">
                      <label>
                        <span class="muted">Preset</span>
                        <select id="sheetPresetSelect" class="preset-select">
                          <option value="">Choose a sheet preset…</option>
                        </select>
                      </label>
                    </div>
                    <div class="row">
                      <label><span>Width</span><input id="sheetW" type="number" step="0.25" data-inch-step="0.25" value="12"></label>
                      <label><span>Height</span><input id="sheetH" type="number" step="0.25" data-inch-step="0.25" value="18"></label>
                    </div>
                  </div>

                  <div class="card">
                    <h2>Document</h2>
                    <div class="toolbar no-print">
                      <label>
                        <span class="muted">Preset</span>
                        <select id="documentPresetSelect" class="preset-select">
                          <option value="">Choose a document preset…</option>
                        </select>
                      </label>
                    </div>
                    <div class="row">
                      <label><span>Width</span><input id="docW" type="number" step="0.125" data-inch-step="0.125" value="3.5"></label>
                      <label><span>Height</span><input id="docH" type="number" step="0.125" data-inch-step="0.125" value="2"></label>
                    </div>
                  </div>

                  <div class="card">
                    <h2>Gutter</h2>
                    <div class="toolbar no-print">
                      <label>
                        <span class="muted">Preset</span>
                        <select id="gutterPresetSelect" class="preset-select">
                          <option value="">Choose a gutter preset…</option>
                        </select>
                      </label>
                    </div>
                    <div class="row">
                      <label><span>Horizontal</span><input id="gutH" type="number" step="0.0625" data-inch-step="0.0625" value="0.125"></label>
                      <label><span>Vertical</span><input id="gutV" type="number" step="0.0625" data-inch-step="0.0625" value="0.125"></label>
                    </div>
                  </div>

                  <div class="card">
                    <h2>Docs (limit)</h2>
                    <div class="row">
                      <label title="Leave blank for auto max"><span>Across</span><input id="forceAcross" type="number" step="1" min="1" data-inch-step="1" data-inch-min="1" placeholder="auto"></label>
                      <label title="Leave blank for auto max"><span>Down</span><input id="forceDown" type="number" step="1" min="1" data-inch-step="1" data-inch-min="1" placeholder="auto"></label>
                    </div>
                  </div>

                  <div class="card">
                    <h2>Margins (inside printable)</h2>
                    <div class="row4">
                      <label><span>Top</span><input id="mTop" type="number" step="0.125" data-inch-step="0.125" value="" placeholder="auto"></label>
                      <label><span>Right</span><input id="mRight" type="number" step="0.125" data-inch-step="0.125" value="" placeholder="auto"></label>
                      <label><span>Bottom</span><input id="mBottom" type="number" step="0.125" data-inch-step="0.125" value="" placeholder="auto"></label>
                      <label><span>Left</span><input id="mLeft" type="number" step="0.125" data-inch-step="0.125" value="" placeholder="auto"></label>
                    </div>
                  </div>

                  <div class="card">
                    <h2>Non‑Printable Area</h2>
                    <div class="row4">
                      <label><span>Top</span><input id="npTop" type="number" step="0.625" data-inch-step="0.625" value="0.0625"></label>
                      <label><span>Right</span><input id="npRight" type="number" step="0.625" data-inch-step="0.625" value="0.0625"></label>
                      <label><span>Bottom</span><input id="npBottom" type="number" step="0.625" data-inch-step="0.625" value="0.0625"></label>
                      <label><span>Left</span><input id="npLeft" type="number" step="0.625" data-inch-step="0.625" value="0.0625"></label>
                    </div>
                  </div>
                </div>

                <div class="toolbar no-print inputs-actions">
                  <button class="btn primary" id="calcBtn">Update Preview</button>
                  <button class="btn" id="resetBtn">Reset</button>
                  <span class="k" id="status"></span>
                </div>
              </div>
            </div>
          </section>

          <section id="tab-presets">
            <div class="presets-pane">
              <div class="card stack preset-intro">
                <h2>Preset Layouts</h2>
                <p class="muted">
                  Jump-start common production setups with one click. Each preset configures sheet, document, gutters, safety
                  areas, and finishing marks to match the listed specification.
                </p>
              </div>
              <div class="preset-grid grid">
                <div class="card stack preset-card">
                  <div class="preset-card-header">
                    <h3>Folded Business Card</h3>
                    <p class="muted">12×18 sheet, 3.5×5 document, ⅛″ gutters, non-printable margin 1⁄16″.</p>
                  </div>
                  <ul>
                    <li>Auto margins enabled</li>
                    <li>Horizontal bifold score at 0.5</li>
                  </ul>
                  <button class="btn primary" data-layout-preset="folded-business-card">Apply preset</button>
                </div>
                <div class="card stack preset-card">
                  <div class="preset-card-header">
                    <h3>Tri-fold Brochure</h3>
                    <p class="muted">12×18 sheet, 11×8.5 document, 0.25″ gutters, 0.125″ non-printable area.</p>
                  </div>
                  <ul>
                    <li>Vertical scores at ⅓ and ⅔</li>
                  </ul>
                  <button class="btn primary" data-layout-preset="trifold-brochure">Apply preset</button>
                </div>
                <div class="card stack preset-card">
                  <div class="preset-card-header">
                    <h3>Postcard Gang Run</h3>
                    <p class="muted">13×19 sheet, 4×6 document, ⅛″ gutters, 0.1″ non-printable area.</p>
                  </div>
                  <ul>
                    <li>No scores or perforations</li>
                  </ul>
                  <button class="btn primary" data-layout-preset="postcard-gang-run">Apply preset</button>
                </div>
                <div class="card stack preset-card">
                  <div class="preset-card-header">
                    <h3>Event Tickets</h3>
                    <p class="muted">12×18 sheet, 2×5.5 document, 0.125″ H / 0.25″ V gutters, 1⁄16″ non-printable.</p>
                  </div>
                  <ul>
                    <li>Vertical perforation at 0.5</li>
                  </ul>
                  <button class="btn primary" data-layout-preset="event-tickets">Apply preset</button>
                </div>
                <div class="card stack preset-card">
                  <div class="preset-card-header">
                    <h3>Table Tents</h3>
                    <p class="muted">13×19 sheet, 5×7 document, 0.25″ gutters, 0.125″ non-printable area.</p>
                  </div>
                  <ul>
                    <li>Horizontal scores at 0.33 and 0.66</li>
                  </ul>
                  <button class="btn primary" data-layout-preset="table-tents">Apply preset</button>
                </div>
              </div>
            </div>
          </section>

          <section id="tab-summary">
            <div class="summary">
              <div class="card"><h3>Counts</h3>
                <div>Across: <span class="v" id="vAcross">—</span></div>
                <div>Down: <span class="v" id="vDown">—</span></div>
                <div>Total: <span class="v" id="vTotal">—</span></div>
              </div>
              <div class="card"><h3>Layout Area</h3>
                <div>W × H: <span class="v" id="vLayout">—</span></div>
                <div>Origin: <span class="v" id="vOrigin">—</span></div>
                <div>Realized Margins: <span class="v" id="vRealMargins">—</span></div>
              </div>
              <div class="card"><h3>Utilization</h3>
                <div>Used W/H: <span class="v" id="vUsed">—</span></div>
                <div>Trailing W/H: <span class="v" id="vTrail">—</span></div>
              </div>
            </div>
          </section>

          <section id="tab-finishing">
            <h3 style="margin-bottom:6px">Cut & Slit Systems</h3>
            <div class="grid" style="grid-template-columns:1fr 1fr">
              <div class="card"><h3>Cuts (Y edges)</h3>
                <table class="table" id="tblCuts"><thead><tr><th>Label</th><th>in</th><th>mm</th></tr></thead><tbody></tbody></table>
              </div>
              <div class="card"><h3>Slits (X edges)</h3>
                <table class="table" id="tblSlits"><thead><tr><th>Label</th><th>in</th><th>mm</th></tr></thead><tbody></tbody></table>
              </div>
            </div>
          </section>

          <section id="tab-scores">
            <div class="scores-pane">
              <div class="score-layout">
                <div class="score-column">
                  <div class="card stack score-card-intro">
                    <div class="score-card-title">
                      <h3>Score Planning</h3>
                      <p class="muted">Scores are normalized to each document. Use a preset for common folds or switch to custom entry to fine-tune the layout.</p>
                    </div>
                  </div>
                  <div class="card stack score-card score-card-vertical">
                    <div class="score-card-header">
                      <div class="score-card-title">
                        <h3>Vertical Scores</h3>
                        <p class="muted">Set positions for lines that run top-to-bottom across the sheet relative to the document width.</p>
                      </div>
                      <div class="score-presets no-print" role="group" aria-label="Vertical score presets">
                        <button class="btn" id="scorePresetBifold" type="button">Bifold</button>
                        <button class="btn" id="scorePresetTrifold" type="button">Trifold</button>
                        <button class="btn" id="scorePresetCustom" type="button">Custom</button>
                      </div>
                    </div>
                    <div class="score-field stack-sm">
                      <label class="score-label" for="scoresV" title="CSV, 0–1 (e.g., 0.5 or 0.33,0.66)">
                        <span>Vertical scores</span>
                        <input id="scoresV" type="text" value="" placeholder="e.g., 0.5" />
                      </label>
                      <p class="muted score-hint">Values are relative to the document width.</p>
                    </div>
                  </div>
                  <div class="card stack score-card score-card-horizontal">
                    <div class="score-card-header">
                      <div class="score-card-title">
                        <h3>Horizontal Scores</h3>
                        <p class="muted">Set positions for lines that run left-to-right across the sheet relative to the document height.</p>
                      </div>
                      <div class="score-presets no-print" role="group" aria-label="Horizontal score presets">
                        <button class="btn" id="scorePresetHBifold" type="button">Bifold</button>
                        <button class="btn" id="scorePresetHTrifold" type="button">Trifold</button>
                        <button class="btn" id="scorePresetHCustom" type="button">Custom</button>
                      </div>
                    </div>
                    <div class="score-field stack-sm">
                      <label class="score-label" for="scoresH" title="CSV, 0–1">
                        <span>Horizontal scores</span>
                        <input id="scoresH" type="text" value="" placeholder="e.g., 0.5" />
                      </label>
                      <p class="muted score-hint">Values are relative to the document height.</p>
                    </div>
                  </div>
                  <div class="card score-actions-card">
                    <div class="score-actions toolbar no-print">
                      <button class="btn" id="swapScoreOffsets" type="button">Swap vertical ↔ horizontal scores</button>
                      <button class="btn primary" id="applyScores" type="button">Apply Scores</button>
                      <span class="muted">Leave fields blank to omit scores.</span>
                    </div>
                  </div>
                </div>
                <div class="score-column score-results">
                  <div class="score-results-grid">
                    <div class="card stack score-table-card">
                      <div>
                        <h3>Scores (Y)</h3>
                        <p class="muted">Horizontal runs positioned along the sheet height.</p>
                      </div>
                      <table class="table" id="tblScoresH"><thead><tr><th>Label</th><th>in</th><th>mm</th></tr></thead><tbody></tbody></table>
                    </div>
                    <div class="card stack score-table-card">
                      <div>
                        <h3>Scores (X)</h3>
                        <p class="muted">Vertical runs positioned along the sheet width.</p>
                      </div>
                      <table class="table" id="tblScoresV"><thead><tr><th>Label</th><th>in</th><th>mm</th></tr></thead><tbody></tbody></table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section id="tab-perforations">
            <div class="scores-pane">
              <div class="score-layout">
                <div class="score-column">
                  <div class="card stack score-card-intro">
                    <div class="score-card-title">
                      <h3>Perforation Planning</h3>
                      <p class="muted">Configure tear-off runs relative to each document before applying them to the layout.</p>
                    </div>
                  </div>
                  <div class="card stack score-card score-card-vertical">
                    <div class="score-card-header">
                      <div class="score-card-title">
                        <h3>Vertical Perforations</h3>
                        <p class="muted">Lines running top-to-bottom relative to the document width.</p>
                      </div>
                      <div class="score-presets no-print" role="group" aria-label="Vertical perforation presets">
                        <button class="btn" id="perfPresetVBifold" type="button">Bifold</button>
                        <button class="btn" id="perfPresetVTrifold" type="button">Trifold</button>
                        <button class="btn" id="perfPresetVCustom" type="button">Custom</button>
                      </div>
                    </div>
                    <div class="score-field stack-sm">
                      <label class="score-label" for="perfV" title="CSV, 0–1 (e.g., 0.5 or 0.33,0.66)">
                        <span>Vertical perforations</span>
                        <input id="perfV" type="text" value="" placeholder="e.g., 0.5" />
                      </label>
                      <p class="muted score-hint">Values are relative to the document width.</p>
                    </div>
                  </div>
                  <div class="card stack score-card score-card-horizontal">
                    <div class="score-card-header">
                      <div class="score-card-title">
                        <h3>Horizontal Perforations</h3>
                        <p class="muted">Lines running left-to-right relative to the document height.</p>
                      </div>
                      <div class="score-presets no-print" role="group" aria-label="Horizontal perforation presets">
                        <button class="btn" id="perfPresetHBifold" type="button">Bifold</button>
                        <button class="btn" id="perfPresetHTrifold" type="button">Trifold</button>
                        <button class="btn" id="perfPresetHCustom" type="button">Custom</button>
                      </div>
                    </div>
                    <div class="score-field stack-sm">
                      <label class="score-label" for="perfH" title="CSV, 0–1">
                        <span>Horizontal perforations</span>
                        <input id="perfH" type="text" value="" placeholder="e.g., 0.5" />
                      </label>
                      <p class="muted score-hint">Values are relative to the document height.</p>
                    </div>
                  </div>
                  <div class="card score-actions-card">
                    <div class="score-actions toolbar no-print">
                      <button class="btn primary" id="applyPerforations" type="button">Apply Perforations</button>
                      <span class="muted">Leave fields blank to omit perforations.</span>
                    </div>
                  </div>
                </div>
                <div class="score-column score-results">
                  <div class="score-results-grid">
                    <div class="card stack score-table-card">
                      <div>
                        <h3>Perforations (Y)</h3>
                        <p class="muted">Horizontal perforation runs positioned along the sheet height.</p>
                      </div>
                      <table class="table" id="tblPerforationsH"><thead><tr><th>Label</th><th>in</th><th>mm</th></tr></thead><tbody></tbody></table>
                    </div>
                    <div class="card stack score-table-card">
                      <div>
                        <h3>Perforations (X)</h3>
                        <p class="muted">Vertical perforation runs positioned along the sheet width.</p>
                      </div>
                      <table class="table" id="tblPerforationsV"><thead><tr><th>Label</th><th>in</th><th>mm</th></tr></thead><tbody></tbody></table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section id="tab-warnings">
            <div class="card stack">
              <h2>Warnings</h2>
              <p class="muted">Production notes and layout warnings will appear here in a future update.</p>
              <p class="muted">For now, use this space to track manual adjustments or finishing considerations that fall outside the
                presets.</p>
            </div>
          </section>

          <section id="tab-print">
            <div class="row">
              <div class="card">
                <h3>Summary Snapshot</h3>
                <p class="muted">Review the calculated layout details without opening a print dialog.</p>
                <div class="summary">
                  <div>Sheet: <span class="v" id="pSheet">—</span></div>
                  <div>Doc: <span class="v" id="pDoc">—</span></div>
                  <div>Counts: <span class="v" id="pCounts">—</span></div>
                  <div>Gutter: <span class="v" id="pGutter">—</span></div>
                  <div>Margins: <span class="v" id="pMargins">—</span></div>
                </div>
              </div>
              <div class="card">
                <h3>What prints?</h3>
                <p class="muted">Summary cards and finishing tables remain available for browser printing.</p>
                <p class="muted">Use this tab as a quick reference for layout specs shared with production.</p>
              </div>
            </div>
            <div class="print-only" id="printTables"></div>
          </section>
        </div>
      </main>
    </div>

    <script src="./js/layout-presets.js"></script>
    <script type="module" src="./js/app.js"></script>
  </body>
</html>
